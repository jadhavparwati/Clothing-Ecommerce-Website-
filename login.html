<!DOCTYPE html>
<html class="gr__html5webtemplates_co_uk">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800&display=swap" rel="stylesheet">
    <title>Novelty Stores Website</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <!-- <link rel="stylesheet" href="style.css"/> -->
    <style>
        *{
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Montserrat , sans-serif;
        }
        .container{
            width: 100%;
            height: 100vh;
            min-height: calc(100vh - 101px);
            background:linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url(../img/pageBcg/bannerBcg.jpeg);
            background-position: center center;
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        form{
            background:rgba(69, 45, 34, 0.9);
            display: flex;
            flex-direction: column;
            padding: 2vw 4vw;
            width: 80%;
            max-width: 400px;
            max-height: 400px;
            border-radius: 10px;
        }
        form h3{
            color: #fff;
            font-weight: 700;
            margin-bottom: 20px;
            text-align: center;
        }
        form h6,a{
            color: #fff;
            font-weight: 70;
            margin-bottom: 20px;
            text-align: center;
            padding-top: 5%;
        }
        form input, form textarea{
            border: 0;
            margin: 10px 0;
            padding: 10px;
            outline: none;
            border-radius: 10px;
            font-size: 10px;
            background: #d3d0cb;
        }
        form button{
            width: 100px;
            flex-basis: 40%;
            margin: 15px auto 0;
            padding: 10px;
            background: #d3d0cb;
            color: #000;
            border-radius: 30px;
            border: 0;
            outline: none;
            font-size: 12px;
            cursor: pointer;
            transition: background 1s;
        }
        form button:hover{
            background: #fff;
        }
    </style>
</head>

<body data-gr-c-s-loaded="true" class="vsc-initialized">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <div class="container">
        <form  id="myForm">
            <h3>LOG IN</h3>
            <!-- <input name="Name" type="text" id="name" placeholder="your name" required> -->
            <input name="Email" type="email" id="email" placeholder="your email" required>
            <input name="Password" type="password" id="password" placeholder="your password" required>
            <button type="button" id="submit-button" >Log IN</button>
            <h6>Dont have an Account? <a href="signin.html">Create Account</a></h6>
        </form>
    </div>
    <script>
        // Verify email and password from SheetDB
        
        const url = 'https://sheetdb.io/api/v1/jaciyyxqlhqm4';
        
        document.getElementById("submit-button").addEventListener("click", function(){
          const email = document.getElementById("email").value;
          const password = document.getElementById("password").value;
          
          // send a GET request to retrieve all data from SheetDB
          fetch(url)
            .then(response => response.json())
            .then(data => {
              // check if the email exists in the data
              const exists = data.find(user => user.Email === email);
              if (exists) {
                // check if the password matches
                if (exists.Password === password) {
                  // Redirect to index1.html
                  window.location.href = 'index1.html';
                } else {
                  alert("Incorrect password");
                }
              } else {
                alert("Email not found");
              }
            })
            .catch(error => console.error(error));
        });
        </script>
    <!-- <script>
        function doGet(e) {
        var x = HtmlService.createTemplateFromFile("login.html");
        var y = x.evaluate();
        var z = y.setXFrameOptionsMode(HtmlService.XFrameOptionsMode.ALLOWALL);
        return z;
        }

        function checkLogin(email, password) {
        var url = 'https://docs.google.com/spreadsheets/d/1OdRZ6zYEvNCb9dwfUxgfMSrdBbpK2voBie1E5G0wzfU/edit#gid=0';
        var ss= SpreadsheetApp.openByUrl(url);
        var webAppSheet = ss.getSheetByName("DATA");
        var getLastRow =  webAppSheet.getLastRow();
        var found_record = '';
        for(var i = 1; i <= getLastRow; i++)
        {
        if(webAppSheet.getRange(i, 1).getValue().toUpperCase() == email.toUpperCase() && 
            webAppSheet.getRange(i, 2).getValue().toUpperCase() == password.toUpperCase())
        {
            found_record = 'TRUE';
        }    
        }
        if(found_record == '')
        {
            found_record = 'FALSE'; 
        }
        
        return found_record;
        
        }

        function LoginUser()
        {
        var email = document.getElementById("email").value;
        var password = document.getElementById("password").value;
        google.script.run.withSuccessHandler(function(output) 
        {
        if(output == 'TRUE')
        {
            document.getElementById("email").innerHTML = username;
            document.getElementById("container").className = "container-off";
            document.getElementById("password").className = "container";    
        }
        else if(output == 'FALSE')
        {
            document.getElementById("errorMessage").innerHTML = "Invalid data";     
        }    
        }).checkLogin(email, password);
        }


    </script> -->
</body>
</html>
<!-- https://formspree.io/f/mqkoekbn   https://sheetdb.io/api/v1/abkk16hwvxalk-->